{"version":3,"file":"selectprofile.min.js","sources":["../src/selectprofile.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Handles changes when selecting profiles.\n *\n * @module     gradeexport_profiles/selectprofile\n * @copyright  2023 Edgardo Palazzo <epalazzo@fra.utn.edu.ar>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = () => {\n    const selectp = document.getElementById(\"id_selectprofile\");\n    const checkboxes = document.querySelectorAll('[id^=\"id_itemids\"]');\n    const changesgrp = document.getElementById(\"fgroup_id_changesgroup\");\n    const savegrp = document.getElementById(\"fgroup_id_savegroup\");\n    savegrp.style.display = \"none\";\n    changesgrp.style.display = \"none\";\n\n    // If any of the checkboxes is clicked, a message is displayed.\n    checkboxes.forEach(\n        (currentValue) => {\n            currentValue.addEventListener('click',\n            function() {\n                handleClickToNew(selectp, changesgrp, savegrp);\n            });\n        });\n    document.getElementById(\"fgroup_id_radioformat\").addEventListener('change', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n    document.getElementById(\"id_export_feedback\").addEventListener('click', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n    document.getElementById(\"id_export_onlyactive\").addEventListener('click', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n    document.getElementById(\"fgroup_id_displaytypes\").addEventListener('click', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n    document.getElementById(\"id_decimals\").addEventListener('change', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n    document.getElementById(\"fgroup_id_separator\").addEventListener('change', function() {\n            handleClickToNew(selectp, changesgrp, savegrp);\n        });\n\n    selectp.addEventListener('change', function() {\n            handleSelectionChange(selectp, checkboxes, savegrp);\n        });\n};\n\n/**\n * Callback for when the selection has changed.\n *\n * @param {Element} selectp\n * @param {NodeList} checkboxes\n * @param {Element} savegrp\n */\nconst handleSelectionChange = (selectp, checkboxes, savegrp) => {\n    if (selectp.value == 'c') {\n        savegrp.style.display = \"none\";\n        checkboxes.forEach(\n            (currentValue) => {\n                currentValue.checked = true;\n            }\n            );\n    } else if (selectp.value == 'd') {\n        savegrp.style.display = \"none\";\n        checkboxes.forEach(\n            (currentValue) => {\n                currentValue.checked = false;\n            }\n            );\n    } else if (selectp.value == 'a') {\n        savegrp.style.display = \"\";\n    } else {\n        document.getElementsByClassName(\"mform\")[0].submit();\n    }\n};\n\n/**\n * Callback for when any item is clicked.\n *\n * @param {Element} selectp\n * @param {Element} changesgrp\n * @param {Element} savegrp\n */\nconst handleClickToNew = (selectp, changesgrp, savegrp) => {\n    changesgrp.style.display = \"\";\n    const bcd = [\"b\", \"c\", \"d\"];\n\n    if (bcd.includes(selectp.value)) {\n        selectp.value = \"a\";\n        savegrp.style.display = \"\";\n    }\n};"],"names":["selectp","document","getElementById","checkboxes","querySelectorAll","changesgrp","savegrp","style","display","forEach","currentValue","addEventListener","handleClickToNew","handleSelectionChange","value","checked","getElementsByClassName","submit","includes"],"mappings":"uKAuBoB,WACVA,QAAUC,SAASC,eAAe,oBAClCC,WAAaF,SAASG,iBAAiB,sBACvCC,WAAaJ,SAASC,eAAe,0BACrCI,QAAUL,SAASC,eAAe,uBACxCI,QAAQC,MAAMC,QAAU,OACxBH,WAAWE,MAAMC,QAAU,OAG3BL,WAAWM,SACNC,eACGA,aAAaC,iBAAiB,SAC9B,WACIC,iBAAiBZ,QAASK,WAAYC,eAGlDL,SAASC,eAAe,yBAAyBS,iBAAiB,UAAU,WACpEC,iBAAiBZ,QAASK,WAAYC,YAE9CL,SAASC,eAAe,sBAAsBS,iBAAiB,SAAS,WAChEC,iBAAiBZ,QAASK,WAAYC,YAE9CL,SAASC,eAAe,wBAAwBS,iBAAiB,SAAS,WAClEC,iBAAiBZ,QAASK,WAAYC,YAE9CL,SAASC,eAAe,0BAA0BS,iBAAiB,SAAS,WACpEC,iBAAiBZ,QAASK,WAAYC,YAE9CL,SAASC,eAAe,eAAeS,iBAAiB,UAAU,WAC1DC,iBAAiBZ,QAASK,WAAYC,YAE9CL,SAASC,eAAe,uBAAuBS,iBAAiB,UAAU,WAClEC,iBAAiBZ,QAASK,WAAYC,YAG9CN,QAAQW,iBAAiB,UAAU,WAC3BE,sBAAsBb,QAASG,WAAYG,mBAWjDO,sBAAwB,CAACb,QAASG,WAAYG,WAC3B,KAAjBN,QAAQc,OACRR,QAAQC,MAAMC,QAAU,OACxBL,WAAWM,SACNC,eACGA,aAAaK,SAAU,MAGP,KAAjBf,QAAQc,OACfR,QAAQC,MAAMC,QAAU,OACxBL,WAAWM,SACNC,eACGA,aAAaK,SAAU,MAGP,KAAjBf,QAAQc,MACfR,QAAQC,MAAMC,QAAU,GAExBP,SAASe,uBAAuB,SAAS,GAAGC,UAW9CL,iBAAmB,CAACZ,QAASK,WAAYC,WAC3CD,WAAWE,MAAMC,QAAU,GACf,CAAC,IAAK,IAAK,KAEfU,SAASlB,QAAQc,SACrBd,QAAQc,MAAQ,IAChBR,QAAQC,MAAMC,QAAU"}